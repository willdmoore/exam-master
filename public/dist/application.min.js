"use strict";var ApplicationConfiguration=function(){var applicationModuleName="exammasterinteractive",applicationModuleVendorDependencies=["ngResource","ngCookies","ngAnimate","ngTouch","ngSanitize","ui.router","ui.bootstrap","ui.utils"],registerModule=function(moduleName,dependencies){angular.module(moduleName,dependencies||[]),angular.module(applicationModuleName).requires.push(moduleName)};return{applicationModuleName:applicationModuleName,applicationModuleVendorDependencies:applicationModuleVendorDependencies,registerModule:registerModule}}();angular.module(ApplicationConfiguration.applicationModuleName,ApplicationConfiguration.applicationModuleVendorDependencies),angular.module(ApplicationConfiguration.applicationModuleName).config(["$locationProvider",function($locationProvider){$locationProvider.hashPrefix("!")}]),angular.element(document).ready(function(){"#_=_"===window.location.hash&&(window.location.hash="#!"),angular.bootstrap(document,[ApplicationConfiguration.applicationModuleName])}),ApplicationConfiguration.registerModule("core"),ApplicationConfiguration.registerModule("users"),angular.module("core").config(["$stateProvider","$urlRouterProvider",function($stateProvider,$urlRouterProvider){$urlRouterProvider.otherwise("/"),$stateProvider.state("practice-examination",{url:"/practice-examination",templateUrl:"modules/core/views/practice-examination.client.view.html"}).state("information",{url:"/information",templateUrl:"modules/core/views/information.client.view.html"}).state("introduction",{url:"/introduction",templateUrl:"modules/core/views/introduction.client.view.html"}).state("home",{url:"/",templateUrl:"modules/core/views/home.client.view.html"})}]),angular.module("core").controller("HeaderController",["$scope","Authentication","Menus",function($scope,Authentication,Menus){$scope.authentication=Authentication,$scope.isCollapsed=!1,$scope.menu=Menus.getMenu("topbar"),$scope.toggleCollapsibleMenu=function(){$scope.isCollapsed=!$scope.isCollapsed},$scope.$on("$stateChangeSuccess",function(){$scope.isCollapsed=!1})}]),angular.module("core").controller("HomeController",["$scope","Authentication",function($scope,Authentication){$scope.authentication=Authentication}]),angular.module("core").controller("InformationController",["$scope",function($scope){$scope.tabs=[{title:"Study Materials",active:!0,content:"STUDY MATERIALS:  Students preparing for the Pennsylvania Insurance Examination should have a current edition of the companion study manual Essentials of Property and Casual Insurance and a current edition of the Pennsylvania Licensing and Examination Insurance booklet.  The study manual Essentials of Property and Casual Insurance provides a complete analysis of the terms."},{title:"Exam Preparation",active:!1,content:"EXAM PREPARATION:  It is recommended that candidates structure their study time over several weeks allocating a specific time each day.  A 30-day programmed instructional guide is included in the study manual."},{title:"Licensing Manual",active:!1,content:"LICENSING MANUAL:  The study manual follows the exam outline.  It is recommended that you begin with chapter one, highlighting important terms and topics.  If you do not fully understand a discussion area, refer to the specimen policy forms located in the specimen page section of the manual."},{title:"Exam Master Software",active:!1,content:"EXAM MASTER SOFTWARE:  After reviewing a chapter in the manual, EXAM MASTER Interactive is the perfect complement to get you up to speed on key information.  The Chapter Preview feature includes over 450 PowerPoint audio slides.  Use this feature to give you a preview of the chapter."},{title:"I Am Ready",active:!1,content:"AM I READY:  This depends to a great extent on how well you've studied and how well you have monitored yourself.  You should not attempt to take your state exam until you have reviewed the study manual and completed it's exercises, reviewed the Flash Card exercises in this software and are consistently scoring 85% or greater in the test mode of EXAM MASTER INTERACTIVE.  Only then should you attempt to take your state exam."}]}]),angular.module("core").controller("IntroductionController",["$scope",function($scope){}]),angular.module("core").controller("PracticeExaminationController",["$scope",function($scope){$scope.index=0,$scope.correct=0,$scope.checkAnswer=function(question_id,answer_id){var question=$scope.questions.filter(function(obj){return obj.id===question_id});question.correct_answer===answer_id?($scope.correct++,$scope.nextQuestion()):$scope.nextQuestion()},$scope.previousQuestion=function(){$scope.index--<0&&($scope.index=$scope.questions.length-1)},$scope.nextQuestion=function(){$scope.index++>=$scope.questions.length-1&&($scope.index=0)},$scope.questions=[{id:1,content:"An applicants licensing exam results are good for...",correct_answer:1},{id:2,content:"The maximum fine per violation for soliciting insurance without a license is...",correct_answer:7},{id:3,content:"A temporary license my be issued to approved individuals for a period of...",correct_answer:10},{id:4,content:"Producers may co-mingle business monies with personal monies...",correct_answer:13},{id:5,content:"All the following are true regarding premiums collected from a policyholder, EXCEPT...",correct_answer:19}],$scope.answers=[{id:1,question_id:1,content:"60 days from the date of the exam."},{id:2,question_id:1,content:"90 days from the date of the exam."},{id:3,question_id:1,content:"180 days from the date of the exam."},{id:4,question_id:1,content:"One year from the date of the exam."},{id:5,question_id:2,content:"$300"},{id:6,question_id:2,content:"$500"},{id:7,question_id:2,content:"$1000"},{id:8,question_id:2,content:"$5000"},{id:9,question_id:3,content:"30 days"},{id:10,question_id:3,content:"60 days"},{id:11,question_id:3,content:"90 days"},{id:12,question_id:3,content:"180 days"},{id:13,question_id:4,content:"Only if permitted in writing by the Insurance Commissioner"},{id:14,question_id:4,content:"At any time if permitted by the insured"},{id:15,question_id:4,content:"Only if each represented insurance company provides prior written consent"},{id:16,question_id:4,content:"Never"},{id:17,question_id:5,content:"Producers may not co-mingle business monies and personal monies unless each insurance company provides written permissions"},{id:18,question_id:5,content:"Producers may make remittance of premiums collected in the same form as received, need not maintain a separate account"},{id:19,question_id:5,content:"Producers who receive cash from insureds may deposit this money into his or her personal account and write a check to the insurance company"},{id:20,question_id:5,content:"If a producer holds a policyholder's funds, they must be maintained in a separate account"}]}]),angular.module("core").filter("answersForQuestion",[function(){return function(input,id){return input.filter(function(obj){return obj.question_id===id})}}]),angular.module("core").filter("shuffle",[function(){return function(input){for(var j,x,i=input.length;i;j=parseInt(Math.random()*i),x=input[--i],input[i]=input[j],input[j]=x);return input.slice(0,3)}}]),angular.module("core").service("Menus",[function(){this.defaultRoles=["*"],this.menus={};var shouldRender=function(user){if(!user)return this.isPublic;if(~this.roles.indexOf("*"))return!0;for(var userRoleIndex in user.roles)for(var roleIndex in this.roles)if(this.roles[roleIndex]===user.roles[userRoleIndex])return!0;return!1};this.validateMenuExistance=function(menuId){if(menuId&&menuId.length){if(this.menus[menuId])return!0;throw new Error("Menu does not exists")}throw new Error("MenuId was not provided")},this.getMenu=function(menuId){return this.validateMenuExistance(menuId),this.menus[menuId]},this.addMenu=function(menuId,isPublic,roles){return this.menus[menuId]={isPublic:isPublic||!1,roles:roles||this.defaultRoles,items:[],shouldRender:shouldRender},this.menus[menuId]},this.removeMenu=function(menuId){this.validateMenuExistance(menuId),delete this.menus[menuId]},this.addMenuItem=function(menuId,menuItemTitle,menuItemURL,menuItemType,menuItemUIRoute,isPublic,roles,position){return this.validateMenuExistance(menuId),this.menus[menuId].items.push({title:menuItemTitle,link:menuItemURL,menuItemType:menuItemType||"item",menuItemClass:menuItemType,uiRoute:menuItemUIRoute||"/"+menuItemURL,isPublic:null===isPublic||"undefined"==typeof isPublic?this.menus[menuId].isPublic:isPublic,roles:null===roles||"undefined"==typeof roles?this.menus[menuId].roles:roles,position:position||0,items:[],shouldRender:shouldRender}),this.menus[menuId]},this.addSubMenuItem=function(menuId,rootMenuItemURL,menuItemTitle,menuItemURL,menuItemUIRoute,isPublic,roles,position){this.validateMenuExistance(menuId);for(var itemIndex in this.menus[menuId].items)this.menus[menuId].items[itemIndex].link===rootMenuItemURL&&this.menus[menuId].items[itemIndex].items.push({title:menuItemTitle,link:menuItemURL,uiRoute:menuItemUIRoute||"/"+menuItemURL,isPublic:null===isPublic||"undefined"==typeof isPublic?this.menus[menuId].items[itemIndex].isPublic:isPublic,roles:null===roles||"undefined"==typeof roles?this.menus[menuId].items[itemIndex].roles:roles,position:position||0,shouldRender:shouldRender});return this.menus[menuId]},this.removeMenuItem=function(menuId,menuItemURL){this.validateMenuExistance(menuId);for(var itemIndex in this.menus[menuId].items)this.menus[menuId].items[itemIndex].link===menuItemURL&&this.menus[menuId].items.splice(itemIndex,1);return this.menus[menuId]},this.removeSubMenuItem=function(menuId,submenuItemURL){this.validateMenuExistance(menuId);for(var itemIndex in this.menus[menuId].items)for(var subitemIndex in this.menus[menuId].items[itemIndex].items)this.menus[menuId].items[itemIndex].items[subitemIndex].link===submenuItemURL&&this.menus[menuId].items[itemIndex].items.splice(subitemIndex,1);return this.menus[menuId]},this.addMenu("topbar")}]),angular.module("users").config(["$httpProvider",function($httpProvider){$httpProvider.interceptors.push(["$q","$location","Authentication",function($q,$location,Authentication){return{responseError:function(rejection){switch(rejection.status){case 401:Authentication.user=null,$location.path("signin");break;case 403:}return $q.reject(rejection)}}}])}]),angular.module("users").config(["$stateProvider",function($stateProvider){$stateProvider.state("profile",{url:"/settings/profile",templateUrl:"modules/users/views/settings/edit-profile.client.view.html"}).state("password",{url:"/settings/password",templateUrl:"modules/users/views/settings/change-password.client.view.html"}).state("accounts",{url:"/settings/accounts",templateUrl:"modules/users/views/settings/social-accounts.client.view.html"}).state("signup",{url:"/signup",templateUrl:"modules/users/views/authentication/signup.client.view.html"}).state("signin",{url:"/signin",templateUrl:"modules/users/views/authentication/signin.client.view.html"}).state("forgot",{url:"/password/forgot",templateUrl:"modules/users/views/password/forgot-password.client.view.html"}).state("reset-invalid",{url:"/password/reset/invalid",templateUrl:"modules/users/views/password/reset-password-invalid.client.view.html"}).state("reset-success",{url:"/password/reset/success",templateUrl:"modules/users/views/password/reset-password-success.client.view.html"}).state("reset",{url:"/password/reset/:token",templateUrl:"modules/users/views/password/reset-password.client.view.html"})}]),angular.module("users").controller("AuthenticationController",["$scope","$http","$location","Authentication",function($scope,$http,$location,Authentication){$scope.authentication=Authentication,$scope.authentication.user&&$location.path("/"),$scope.signup=function(){$http.post("/auth/signup",$scope.credentials).success(function(response){$scope.authentication.user=response,$location.path("/")}).error(function(response){$scope.error=response.message})},$scope.signin=function(){$http.post("/auth/signin",$scope.credentials).success(function(response){$scope.authentication.user=response,$location.path("/")}).error(function(response){$scope.error=response.message})}}]),angular.module("users").controller("PasswordController",["$scope","$stateParams","$http","$location","Authentication",function($scope,$stateParams,$http,$location,Authentication){$scope.authentication=Authentication,$scope.authentication.user&&$location.path("/"),$scope.askForPasswordReset=function(){$scope.success=$scope.error=null,$http.post("/auth/forgot",$scope.credentials).success(function(response){$scope.credentials=null,$scope.success=response.message}).error(function(response){$scope.credentials=null,$scope.error=response.message})},$scope.resetUserPassword=function(){$scope.success=$scope.error=null,$http.post("/auth/reset/"+$stateParams.token,$scope.passwordDetails).success(function(response){$scope.passwordDetails=null,Authentication.user=response,$location.path("/password/reset/success")}).error(function(response){$scope.error=response.message})}}]),angular.module("users").controller("SettingsController",["$scope","$http","$location","Users","Authentication",function($scope,$http,$location,Users,Authentication){$scope.user=Authentication.user,$scope.user||$location.path("/"),$scope.hasConnectedAdditionalSocialAccounts=function(provider){for(var i in $scope.user.additionalProvidersData)return!0;return!1},$scope.isConnectedSocialAccount=function(provider){return $scope.user.provider===provider||$scope.user.additionalProvidersData&&$scope.user.additionalProvidersData[provider]},$scope.removeUserSocialAccount=function(provider){$scope.success=$scope.error=null,$http["delete"]("/users/accounts",{params:{provider:provider}}).success(function(response){$scope.success=!0,$scope.user=Authentication.user=response}).error(function(response){$scope.error=response.message})},$scope.updateUserProfile=function(isValid){if(isValid){$scope.success=$scope.error=null;var user=new Users($scope.user);user.$update(function(response){$scope.success=!0,Authentication.user=response},function(response){$scope.error=response.data.message})}else $scope.submitted=!0},$scope.changeUserPassword=function(){$scope.success=$scope.error=null,$http.post("/users/password",$scope.passwordDetails).success(function(response){$scope.success=!0,$scope.passwordDetails=null}).error(function(response){$scope.error=response.message})}}]),angular.module("users").factory("Authentication",[function(){var _this=this;return _this._data={user:window.user},_this._data}]),angular.module("users").factory("Users",["$resource",function($resource){return $resource("users",{},{update:{method:"PUT"}})}]);